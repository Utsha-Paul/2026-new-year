<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Panda | 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;700&family=Playfair+Display:italic,wght@700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; background: #000; color: white; font-family: 'Montserrat', sans-serif; }
        #canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        
        .content-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            text-align: center;
            width: 85%;
            transition: opacity 1.5s ease-in-out;
        }

        #countdown-display {
            font-size: clamp(5rem, 20vw, 12rem);
            font-weight: 700;
            letter-spacing: -5px;
            margin: 0;
            background: linear-gradient(to bottom, #ffffff, #888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255,255,255,0.2);
        }

        #message-display {
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .happy-new-year {
            font-size: clamp(2rem, 6vw, 4rem);
            color: #ffd700;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        #typewriter {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: clamp(1.1rem, 3.5vw, 1.8rem);
            line-height: 1.8;
            max-width: 800px;
            margin: 0 auto;
            color: #eee;
            min-height: 200px;
        }

        .cursor {
            display: inline-block;
            width: 3px;
            background-color: #ffd700;
            margin-left: 5px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 8px;
            opacity: 0.5;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="timer-container" class="content-wrapper">
        <div class="label">The moment is almost here</div>
        <h1 id="countdown-display">00:00:00</h1>
    </div>

    <div id="message-display" class="content-wrapper">
        <h1 class="happy-new-year">Happy New Year!</h1>
        <div id="typewriter"></div><span class="cursor" id="cursor">|</span>
    </div>

    <script>
        // --- CONFIGURATION ---
        const TARGET_DATE = new Date('January 1, 2026 00:00:00').getTime();
        
        // THE POETIC PASSAGE
        const textToType = "To my little Panda, They say the stars align only once a year, but having you as my best friend feels like a sky that never stops glowing. You’ve been the quiet peace in my loudest days and the laughter in my quietest ones. As we step into 2026, I don't just want to be by your side—I want to be the person who makes sure your year is as bright as the light you bring into mine. New year, same us, and a million more memories to make. Happy New Year, Sushu. Here’s to forever.";

        // --- 3D PARTICLES ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const particlesGeometry = new THREE.BufferGeometry();
        const count = 12000;
        const positions = new Float32Array(count * 3);
        for(let i = 0; i < count * 3; i++) { positions[i] = (Math.random() - 0.5) * 12; }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const particlesMaterial = new THREE.PointsMaterial({ size: 0.007, color: 0xffffff, transparent: true, opacity: 0.5 });
        const particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);
        camera.position.z = 4;

        function animate() {
            requestAnimationFrame(animate);
            particles.rotation.y += 0.0015;
            particles.rotation.x += 0.0005; // Extra movement for "perfect" feel
            renderer.render(scene, camera);
        }
        animate();

        // --- TYPEWRITER LOGIC ---
        let charIndex = 0;
        function typeEffect() {
            if (charIndex < textToType.length) {
                document.getElementById("typewriter").innerHTML += textToType.charAt(charIndex);
                charIndex++;
                // Balanced speed for a poetic feel
                setTimeout(typeEffect, 65);
            }
        }

        // --- TIMER LOGIC ---
        let hasStartedWriting = false;

        function updateCountdown() {
            const now = new Date().getTime();
            const diff = TARGET_DATE - now;

            const timerContainer = document.getElementById('timer-container');
            const messageDisplay = document.getElementById('message-display');

            if (diff <= 0) {
                if (!hasStartedWriting) {
                    hasStartedWriting = true;
                    timerContainer.style.opacity = '0';
                    setTimeout(() => {
                        timerContainer.style.display = 'none';
                        messageDisplay.style.display = 'block';
                        setTimeout(() => { 
                            messageDisplay.style.opacity = '1'; 
                            typeEffect(); 
                        }, 100);
                        particlesMaterial.color.set(0xffd700); 
                        particlesMaterial.size = 0.012; 
                    }, 1500);
                }
                return;
            }

            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdown-display').innerText = 
                `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
